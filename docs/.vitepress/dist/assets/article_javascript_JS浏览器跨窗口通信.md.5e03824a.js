import{_ as s,o as n,c as a,V as l}from"./chunks/framework.ed8632ae.js";const p="/img/study/javascript/JS浏览器跨窗口通信/demo.png",E=JSON.parse('{"title":"🚣 JS浏览器跨窗口通信","description":"","frontmatter":{},"headers":[],"relativePath":"article/javascript/JS浏览器跨窗口通信.md","filePath":"article/javascript/JS浏览器跨窗口通信.md"}'),o={name:"article/javascript/JS浏览器跨窗口通信.md"},t=l(`<h1 id="js浏览器跨窗口通信" tabindex="-1">🚣 JS浏览器跨窗口通信 <a class="header-anchor" href="#js浏览器跨窗口通信" aria-label="Permalink to &quot;:rowboat: JS浏览器跨窗口通信&quot;">​</a></h1><blockquote><p>最近这段时间很火的浏览器跨窗口通信炫酷特效，案例整理于渡一袁老师。一起看看吧....</p></blockquote><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#BABED8;">DOCTYPE html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">	</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">charset</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">utf-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">	</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">	</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">alert1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">white-space:pre-wrap;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">br</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#BABED8;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">alert2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">white-space:pre-wrap;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">canvas</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">canvas1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">position:absolute;left:0;top:0;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">canvas</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">			const alert1 = document.getElementById(&#39;alert1&#39;);</span></span>
<span class="line"><span style="color:#BABED8;">			const alert2 = document.getElementById(&#39;alert2&#39;);</span></span>
<span class="line"><span style="color:#BABED8;">			const canvas1 = document.getElementById(&#39;canvas1&#39;);</span></span>
<span class="line"><span style="color:#BABED8;">			const ctx = canvas1.getContext(&#39;2d&#39;);</span></span>
<span class="line"><span style="color:#BABED8;">			</span></span>
<span class="line"><span style="color:#BABED8;">			const keys = getOtherKeys(); // 获取其它窗口的storage keys</span></span>
<span class="line"><span style="color:#BABED8;">			const key = keys.length == 0 ? 1 : keys.at(-1) + 1; // 自增最大的key序号，定义自己窗口storage key</span></span>
<span class="line"><span style="color:#BABED8;">			const color = [&#39;red&#39;, &#39;blue&#39;, &#39;green&#39;][key % 3]; // 获取圆颜色</span></span>
<span class="line"><span style="color:#BABED8;">			</span></span>
<span class="line"><span style="color:#BABED8;">			// 窗口关闭时删除自己窗口storage</span></span>
<span class="line"><span style="color:#BABED8;">			window.onunload = function () </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">			    localStorage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeItem</span><span style="color:#BABED8;">(key);</span></span>
<span class="line"><span style="color:#BABED8;">			</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">			</span></span>
<span class="line"><span style="color:#BABED8;">			function getOtherKeys() </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">			    const keys </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> [];</span></span>
<span class="line"><span style="color:#BABED8;">			    </span><span style="color:#82AAFF;">for</span><span style="color:#BABED8;"> (let i </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">0</span><span style="color:#BABED8;">; i </span><span style="color:#89DDFF;">&lt;</span><span style="color:#BABED8;"> localStorage</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">length; i</span><span style="color:#89DDFF;">++</span><span style="color:#BABED8;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">			        const k </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">Number</span><span style="color:#BABED8;">(localStorage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">key</span><span style="color:#BABED8;">(i));</span></span>
<span class="line"><span style="color:#BABED8;">			        !</span><span style="color:#F07178;">isNaN</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">k</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> &amp;&amp; keys.</span><span style="color:#F07178;">push</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">k</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;">;</span></span>
<span class="line"><span style="color:#BABED8;">			    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">			    return keys</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sort</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">a</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">b</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> a </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> b);</span></span>
<span class="line"><span style="color:#BABED8;">			</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">			</span></span>
<span class="line"><span style="color:#BABED8;">			function draw() </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">			    const </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> clientWidth</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> clientHeight </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">body; </span><span style="color:#676E95;font-style:italic;">// 获取body高宽</span></span>
<span class="line"><span style="color:#BABED8;">			    const </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> screenX</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> screenY </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> window; </span><span style="color:#676E95;font-style:italic;">// 获取浏览器相对屏幕坐标</span></span>
<span class="line"><span style="color:#BABED8;">			    const barHeight </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> window</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">outerHeight </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> window</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">innerHeight; </span><span style="color:#676E95;font-style:italic;">// 获取浏览器body顶部地址栏高度</span></span>
<span class="line"><span style="color:#BABED8;">			</span></span>
<span class="line"><span style="color:#89DDFF;">			    </span><span style="color:#676E95;font-style:italic;">// 记录log</span></span>
<span class="line"><span style="color:#BABED8;">			    alert1</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">textContent </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> key</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> clientWidth</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> clientHeight</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> screenX</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> screenY</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> barHeight </span><span style="color:#89DDFF;">},</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">2</span><span style="color:#BABED8;">);</span></span>
<span class="line"><span style="color:#BABED8;">			</span></span>
<span class="line"><span style="color:#89DDFF;">			    </span><span style="color:#676E95;font-style:italic;">// 设置canvas为整个body高宽，铺满body</span></span>
<span class="line"><span style="color:#BABED8;">			    canvas1</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">width </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> clientWidth;</span></span>
<span class="line"><span style="color:#BABED8;">			    canvas1</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">height </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> clientHeight;</span></span>
<span class="line"><span style="color:#BABED8;">			</span></span>
<span class="line"><span style="color:#89DDFF;">			    </span><span style="color:#676E95;font-style:italic;">// 获取自己的圆心坐标，为body中心</span></span>
<span class="line"><span style="color:#BABED8;">			    const x </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> clientWidth </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">2</span><span style="color:#BABED8;">;</span></span>
<span class="line"><span style="color:#BABED8;">			    const y </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> clientHeight </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">2</span><span style="color:#BABED8;">;</span></span>
<span class="line"><span style="color:#BABED8;">			</span></span>
<span class="line"><span style="color:#89DDFF;">			    </span><span style="color:#676E95;font-style:italic;">// 画自己的圆</span></span>
<span class="line"><span style="color:#BABED8;">			    ctx</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">fillStyle </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> color;</span></span>
<span class="line"><span style="color:#BABED8;">			    ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">beginPath</span><span style="color:#BABED8;">();</span></span>
<span class="line"><span style="color:#BABED8;">			    ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">arc</span><span style="color:#BABED8;">(x</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> y</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">15</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> Math</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">PI </span><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">2</span><span style="color:#BABED8;">);</span></span>
<span class="line"><span style="color:#BABED8;">			    ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fill</span><span style="color:#BABED8;">();</span></span>
<span class="line"><span style="color:#BABED8;">			</span></span>
<span class="line"><span style="color:#89DDFF;">			    </span><span style="color:#676E95;font-style:italic;">// 记录自己的position</span></span>
<span class="line"><span style="color:#BABED8;">			    const position </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">			        </span><span style="color:#F07178;">top</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> y </span><span style="color:#89DDFF;">+</span><span style="color:#BABED8;"> barHeight </span><span style="color:#89DDFF;">+</span><span style="color:#BABED8;"> screenY</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">			        </span><span style="color:#F07178;">left</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> x </span><span style="color:#89DDFF;">+</span><span style="color:#BABED8;"> screenX</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">			        </span><span style="color:#F07178;">color</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> color</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">			    </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">;</span></span>
<span class="line"><span style="color:#89DDFF;">			    </span><span style="color:#676E95;font-style:italic;">// 获取其它窗口position，并遍历</span></span>
<span class="line"><span style="color:#BABED8;">			    </span><span style="color:#82AAFF;">getOtherKeys</span><span style="color:#BABED8;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#BABED8;">(</span><span style="color:#BABED8;font-style:italic;">k</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">			        </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">position2</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parse</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">localStorage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getItem</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">k</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 获取其中一个窗口的圆心position</span></span>
<span class="line"><span style="color:#F07178;">			        </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">w</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">position2</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">left</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">position</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">left</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 获取相对自己圆心的横向间距</span></span>
<span class="line"><span style="color:#F07178;">			        </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">h</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">position2</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">top</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">position</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">top</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 获取相对自己圆心的纵向间距</span></span>
<span class="line"><span style="color:#F07178;">			</span></span>
<span class="line"><span style="color:#89DDFF;">			        </span><span style="color:#676E95;font-style:italic;">// 在自己的canvas上画出该圆</span></span>
<span class="line"><span style="color:#F07178;">			        </span><span style="color:#BABED8;">ctx</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">fillStyle</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">position2</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">color</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">			        </span><span style="color:#BABED8;">ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">beginPath</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">			        </span><span style="color:#BABED8;">ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">arc</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">w</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">y</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">h</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">15</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">Math</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">PI</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">			        </span><span style="color:#BABED8;">ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fill</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">			</span></span>
<span class="line"><span style="color:#89DDFF;">			        </span><span style="color:#676E95;font-style:italic;">// 画连接线</span></span>
<span class="line"><span style="color:#F07178;">			        </span><span style="color:#BABED8;">ctx</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">strokeStyle</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">black</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">			        </span><span style="color:#BABED8;">ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">beginPath</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">			        </span><span style="color:#BABED8;">ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">moveTo</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">x</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">y</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">			        </span><span style="color:#BABED8;">ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">lineTo</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">w</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">y</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">h</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">			        </span><span style="color:#BABED8;">ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stroke</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">			    </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">			</span></span>
<span class="line"><span style="color:#89DDFF;">			    </span><span style="color:#676E95;font-style:italic;">// 更新自己窗口的position</span></span>
<span class="line"><span style="color:#BABED8;">			    localStorage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setItem</span><span style="color:#BABED8;">(key</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#BABED8;">(position));</span></span>
<span class="line"><span style="color:#BABED8;">			</span></span>
<span class="line"><span style="color:#89DDFF;">			    </span><span style="color:#676E95;font-style:italic;">// 记录log</span></span>
<span class="line"><span style="color:#BABED8;">			    alert2</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">textContent </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#BABED8;">(localStorage</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">2</span><span style="color:#BABED8;">);</span></span>
<span class="line"><span style="color:#BABED8;">			</span></span>
<span class="line"><span style="color:#BABED8;">			    window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">requestAnimationFrame</span><span style="color:#BABED8;">(draw);</span></span>
<span class="line"><span style="color:#BABED8;">			</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#BABED8;">			window.requestAnimationFrame(draw);</span></span>
<span class="line"><span style="color:#BABED8;">		</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#BABED8;">	</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p><img src="`+p+'" alt="alt 示例图片"></p><ul><li>好了，以上的总结就到此为止了，如果<code>有疑问可以不问</code>也可以联系作者。咱们下期再见! Good bye! 🌸</li></ul>',5),e=[t];function c(r,y,D,F,B,i){return n(),a("div",null,e)}const d=s(o,[["render",c]]);export{E as __pageData,d as default};
